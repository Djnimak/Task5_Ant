<?xml version="1.0" encoding="UTF-8" ?>
<project basedir="." name="ant_task" default="delete_war">

    <description>
        Clean after yourself :)
    </description>

    <property environment="env"/>
    <property name="TOMCAT_HOME" value="${env.CATALINA_HOME}"/>
    <property name="TOMCAT_HOME.bin" value="${TOMCAT_HOME}/bin"/>
    <property name="project.deploy.location" value="${TOMCAT_HOME}/webapps"/>
    <property name="war.dir" value="${project.deploy.location}/${ant.project.name}"/>


    <target name="shutdown_server">
        <exec executable="cmd" dir="${TOMCAT_HOME.bin}" os="${os.name}">
            <!-- Change the file to start the server to the one corresponding to your OS-->
            <arg line="/c shutdown.bat"/>
        </exec>
    </target>

    <target name="delete_war" depends="shutdown_server">
        <delete dir="${war.dir}"/>
        <delete file="${project.deploy.location}/${ant.project.name}.war"/>
    </target>

</project>